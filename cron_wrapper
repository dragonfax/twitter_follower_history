#!/bin/sh

BASE_DIR=`dirname $0`
FOLLOWERS_CMD="twitter-follow dragonfax"
FOLLOWER_HISTORY_DIR="$BASE_DIR/../twitter_follower_history_data"
FOLLOWER_HISTORY_FILE="$FOLLOWER_HISTORY_DIR/follwers.txt"

echo "pulling followers"
$FOLLOWERS_CMD | sort >$FOLLOWER_HISTORY_FILE

GIT_CMD="git --git-dir=$FOLLOWER_HISTORY_DIR/.git --work-tree=$FOLLOWER_HISTORY_DIR"

echo "commiting new file version"
$GIT_CMD commit -a -m 'auto-checkin of follower history'

echo "pushing to github"
$GIT_CMD push origin master:master

